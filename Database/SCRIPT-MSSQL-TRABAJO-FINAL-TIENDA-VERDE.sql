--CREATE DATABASE dbtiendaverde
GO
USE dbtiendaverde
GO
/****** Object:  Table [dbo].[CATEGORIA]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CATEGORIA](
	[IDCATEGORIA] [char](1) NULL,
	[NOMBRE] [varchar](80) NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CLIENTE]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CLIENTE](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[IDCLIENTE]  AS ('C'+right('00'+CONVERT([varchar](2),[ID]),(2))) PERSISTED,
	[NOMBRES] [varchar](70) NULL,
	[APELLIDOS] [varchar](100) NULL,
	[DNI] [char](8) NULL,
	[DIRECCION] [varchar](20) NULL,
	[CORREO] [varchar](100) NULL,
	[CONTRASENA] [varchar](50) NULL,
	[TELEFONO] [varchar](30) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PEDIDO]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PEDIDO](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[IDPEDIDO]  AS ('PE'+right('00'+CONVERT([varchar](2),[ID]),(2))) PERSISTED,
	[IDCLIENTE] [char](3) NULL,
	[TOTALVENTA] [float] NULL,
	[REALIZADO] [bit] NULL,
PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PEDIDODETALLE]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PEDIDODETALLE](
	[IDPEDIDODETALLE] [int] IDENTITY(1,1) NOT NULL,
	[IDPEDIDO] [varchar](4) NULL,
	[IDPRODUCTO] [char](4) NULL,
	[CANTIDAD] [decimal](10, 2) NULL,
	[PRECIO] [decimal](10, 2) NULL,
	[TOTAL]  AS (round([CANTIDAD]*[PRECIO],(2))) PERSISTED,
PRIMARY KEY CLUSTERED 
(
	[IDPEDIDODETALLE] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PRODUCTO]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PRODUCTO](
	[IDPRODUCTO] [char](4) NULL,
	[NOMBRE] [varchar](200) NULL,
	[IDCATEGORIA] [char](1) NULL,
	[PRECIO] [float] NULL,
	[STOCK] [float] NULL,
	[RUTAIMAGEN] [varchar](200) NULL
) ON [PRIMARY]
GO
INSERT [dbo].[CATEGORIA] ([IDCATEGORIA], [NOMBRE]) VALUES (N'V', N'VERDURAS')
GO
INSERT [dbo].[CATEGORIA] ([IDCATEGORIA], [NOMBRE]) VALUES (N'M', N'ALIMENTOS MARINOS')
GO
INSERT [dbo].[CATEGORIA] ([IDCATEGORIA], [NOMBRE]) VALUES (N'F', N'FRUTAS')
GO
INSERT [dbo].[CATEGORIA] ([IDCATEGORIA], [NOMBRE]) VALUES (N'L', N'LACTEOS')
GO
SET IDENTITY_INSERT [dbo].[CLIENTE] ON 
GO
INSERT [dbo].[CLIENTE] ([ID], [NOMBRES], [APELLIDOS], [DNI], [DIRECCION], [CORREO], [CONTRASENA], [TELEFONO]) VALUES (1, N'JENNIFER', N'MORENO', N'46455445', N'Av Velasco Astete 22', N'JENMV234@GMAIL.COM', N'1234', N'989334333')
GO
INSERT [dbo].[CLIENTE] ([ID], [NOMBRES], [APELLIDOS], [DNI], [DIRECCION], [CORREO], [CONTRASENA], [TELEFONO]) VALUES (2, N'GIANFRANCO', N'CARRASCO SAENZ', N'46542321', N'VELASCO ASTETE 3331', N'GIANFRANCO@GMAIL.COM', N'1234', N'931049433')
GO
SET IDENTITY_INSERT [dbo].[CLIENTE] OFF
GO
SET IDENTITY_INSERT [dbo].[PEDIDO] ON 
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (1, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (2, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (3, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (4, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (5, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (6, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (7, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (8, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (9, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (10, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (11, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (12, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (13, N'C01', 100, 1)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (14, N'C01', 100, 0)
GO
INSERT [dbo].[PEDIDO] ([ID], [IDCLIENTE], [TOTALVENTA], [REALIZADO]) VALUES (15, N'C02', 100, 1)
GO
SET IDENTITY_INSERT [dbo].[PEDIDO] OFF
GO
SET IDENTITY_INSERT [dbo].[PEDIDODETALLE] ON 
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (1, N'PE01', N'P003', CAST(1.00 AS Decimal(10, 2)), CAST(5.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (2, N'PE01', N'P004', CAST(1.00 AS Decimal(10, 2)), CAST(2.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (3, N'PE02', N'P003', CAST(1.00 AS Decimal(10, 2)), CAST(5.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (4, N'PE03', N'P004', CAST(1.00 AS Decimal(10, 2)), CAST(2.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (5, N'PE04', N'P002', CAST(1.00 AS Decimal(10, 2)), CAST(3.90 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (6, N'PE04', N'P001', CAST(1.00 AS Decimal(10, 2)), CAST(4.50 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (7, N'PE04', N'P006', CAST(1.00 AS Decimal(10, 2)), CAST(19.80 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (8, N'PE05', N'P007', CAST(1.00 AS Decimal(10, 2)), CAST(3.50 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (9, N'PE06', N'P002', CAST(4.00 AS Decimal(10, 2)), CAST(3.90 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (10, N'PE06', N'P003', CAST(3.00 AS Decimal(10, 2)), CAST(5.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (11, N'PE06', N'P001', CAST(1.00 AS Decimal(10, 2)), CAST(4.50 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (12, N'PE06', N'P004', CAST(2.00 AS Decimal(10, 2)), CAST(2.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (13, N'PE06', N'P006', CAST(1.00 AS Decimal(10, 2)), CAST(19.80 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (14, N'PE07', N'P003', CAST(1.00 AS Decimal(10, 2)), CAST(5.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (15, N'PE08', N'P004', CAST(1.00 AS Decimal(10, 2)), CAST(2.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (16, N'PE09', N'P003', CAST(1.00 AS Decimal(10, 2)), CAST(5.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (17, N'PE09', N'P002', CAST(1.00 AS Decimal(10, 2)), CAST(3.90 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (18, N'PE09', N'P007', CAST(1.00 AS Decimal(10, 2)), CAST(3.50 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (19, N'PE09', N'P004', CAST(1.00 AS Decimal(10, 2)), CAST(2.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (20, N'PE10', N'P003', CAST(2.00 AS Decimal(10, 2)), CAST(5.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (21, N'PE10', N'P002', CAST(1.00 AS Decimal(10, 2)), CAST(3.90 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (22, N'PE10', N'P015', CAST(1.00 AS Decimal(10, 2)), CAST(7.80 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (23, N'PE10', N'P016', CAST(1.00 AS Decimal(10, 2)), CAST(8.10 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (24, N'PE10', N'P010', CAST(2.00 AS Decimal(10, 2)), CAST(1.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (25, N'PE10', N'P011', CAST(1.00 AS Decimal(10, 2)), CAST(2.70 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (26, N'PE10', N'P013', CAST(1.00 AS Decimal(10, 2)), CAST(20.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (27, N'PE11', N'P019', CAST(1.00 AS Decimal(10, 2)), CAST(2.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (28, N'PE11', N'P001', CAST(1.00 AS Decimal(10, 2)), CAST(4.50 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (29, N'PE11', N'P007', CAST(1.00 AS Decimal(10, 2)), CAST(3.50 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (30, N'PE12', N'P018', CAST(1.00 AS Decimal(10, 2)), CAST(14.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (31, N'PE12', N'P013', CAST(1.00 AS Decimal(10, 2)), CAST(20.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (32, N'PE12', N'P006', CAST(1.00 AS Decimal(10, 2)), CAST(19.80 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (35, N'PE13', N'P003', CAST(33.00 AS Decimal(10, 2)), CAST(5.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (36, N'PE13', N'P014', CAST(1.00 AS Decimal(10, 2)), CAST(25.90 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (37, N'PE13', N'P004', CAST(1.00 AS Decimal(10, 2)), CAST(2.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (38, N'PE13', N'P010', CAST(21.00 AS Decimal(10, 2)), CAST(1.40 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (39, N'PE14', N'P004', CAST(1.00 AS Decimal(10, 2)), CAST(2.30 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (40, N'PE15', N'P021', CAST(43.00 AS Decimal(10, 2)), CAST(6.50 AS Decimal(10, 2)))
GO
INSERT [dbo].[PEDIDODETALLE] ([IDPEDIDODETALLE], [IDPEDIDO], [IDPRODUCTO], [CANTIDAD], [PRECIO]) VALUES (41, N'PE15', N'P012', CAST(15.00 AS Decimal(10, 2)), CAST(2.80 AS Decimal(10, 2)))
GO
SET IDENTITY_INSERT [dbo].[PEDIDODETALLE] OFF
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P001', N'TOMATE', N'V', 4.5, 100, N'../../assets/img/featured/feature-3.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P002', N'SANDÍA', N'F', 3.9, 50, N'../../assets/img/featured/feature-4.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P003', N'ARÁNDANOS', N'F', 5.4, 30, N'../../assets/img/featured/feature-5.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P004', N'MANGO', N'F', 2.3, 30, N'../../assets/img/featured/feature-7.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P005', N'MANZANA', N'F', 7.7, 50, N'../../assets/img/featured/feature-8.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P006', N'LECHE SIN LACTOSA PASTEURIZADA', N'L', 19.8, 50, N'../../assets/img/featured/feature-9.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P007', N'CARNE PARA GUISO', N'M', 3.5, 200, N'../../assets/img/featured/feature-1.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P008', N'CALABAZA', N'F', 5.6, 200, N'../../assets/img/featured/calabaza.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P009', N'CARNE DE CERDO', N'M', 19.4, 200, N'../../assets/img/featured/carne_cerdo.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P010', N'CEBOLLA', N'M', 1.4, 200, N'../../assets/img/featured/cebolla.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P011', N'COLIFLOR', N'V', 2.7, 200, N'../../assets/img/featured/coliflor.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P012', N'ESPINACA', N'V', 2.8, 200, N'../../assets/img/featured/espinaca.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P013', N'FILETE DE CARNE', N'M', 20.4, 200, N'../../assets/img/featured/filete_carne.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P014', N'FILETE DE PESCADO', N'M', 25.9, 200, N'../../assets/img/featured/filete_pescado.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P015', N'LECHE 0 GRASAS', N'L', 7.8, 200, N'../../assets/img/featured/leche_2.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P016', N'LECHA PASTEURIZADA', N'L', 8.1, 200, N'../../assets/img/featured/leche_3.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P017', N'LECHUGA', N'V', 3.5, 200, N'../../assets/img/featured/lechuga.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P018', N'MANTEQUILLA', N'L', 14.3, 200, N'../../assets/img/featured/mantequilla.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P019', N'PEREJIL', N'V', 2.3, 200, N'../../assets/img/featured/perejil.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P020', N'PIERNA DE POLLO', N'M', 15.4, 200, N'../../assets/img/featured/pierna_pollo.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P021', N'QUESO CHEDDAR', N'L', 6.5, 200, N'../../assets/img/featured/queso_cheddar.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P022', N'QUESO FRESCO', N'L', 7.4, 200, N'../../assets/img/featured/queso_fresco.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P023', N'YOGUR', N'L', 8.9, 200, N'../../assets/img/featured/yogur.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P024', N'ZANAHORIA', N'V', 1.7, 200, N'../../assets/img/featured/zanahoria.jpg')
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [NOMBRE], [IDCATEGORIA], [PRECIO], [STOCK], [RUTAIMAGEN]) VALUES (N'P025', N'BERENJENA', N'V', 1.8, 200, N'../../assets/img/featured/berenjena.jpg')
GO
/****** Object:  StoredProcedure [dbo].[ACTUALIZAR_ESTADO_PEDIDO]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ACTUALIZAR_ESTADO_PEDIDO]
(
@IDPEDIDO VARCHAR(5),
@REALIZADO BIT
)
AS
UPDATE PEDIDO SET REALIZADO=@REALIZADO WHERE IDPEDIDO=@IDPEDIDO
GO
/****** Object:  StoredProcedure [dbo].[ACTUALIZAR_PEDIDO]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ACTUALIZAR_PEDIDO]
(
@IDPEDIDO VARCHAR(5),
@IDPRODUCTO VARCHAR(5),
@CANTIDAD FLOAT
)
AS
UPDATE PEDIDODETALLE SET CANTIDAD=@CANTIDAD WHERE IDPEDIDO=@IDPEDIDO AND IDPRODUCTO=@IDPRODUCTO
GO
/****** Object:  StoredProcedure [dbo].[ELIMINAR_PEDIDO]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ELIMINAR_PEDIDO]
(
@IDPEDIDO VARCHAR(5),
@IDPRODUCTO VARCHAR(5)
)
AS
DELETE PEDIDODETALLE WHERE IDPEDIDO = @IDPEDIDO AND IDPRODUCTO = @IDPRODUCTO
GO
/****** Object:  StoredProcedure [dbo].[OBTENER_DETALLE_PRODUCTO]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[OBTENER_DETALLE_PRODUCTO]
(
@IDPRODUCTO VARCHAR(5)
)
AS
SELECT * FROM PRODUCTO WHERE IDPRODUCTO=@IDPRODUCTO
GO
/****** Object:  StoredProcedure [dbo].[OBTENER_PEDIDO]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[OBTENER_PEDIDO]
(
@PEDIDO VARCHAR(5)
)
AS
SELECT PD.IDPEDIDODETALLE, PD.IDPEDIDO, PD.IDPRODUCTO, PR.NOMBRE AS NOMBREPRODUCTO, PR.RUTAIMAGEN, PD.CANTIDAD, PD.PRECIO, 
PD.TOTAL  FROM PEDIDO P 
INNER JOIN PEDIDODETALLE PD ON P.IDPEDIDO = PD.IDPEDIDO 
INNER JOIN PRODUCTO PR ON PD.IDPRODUCTO = PR.IDPRODUCTO
WHERE PD.IDPEDIDO = @PEDIDO AND REALIZADO=0
GO
/****** Object:  StoredProcedure [dbo].[OBTENER_PRODUCTOS_DESTACADOS]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[OBTENER_PRODUCTOS_DESTACADOS]
AS
SELECT TOP 8 * FROM PRODUCTO ORDER BY NEWID()
GO
/****** Object:  StoredProcedure [dbo].[OBTENER_PRODUCTOS_N_TOP_ITEMS]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[OBTENER_PRODUCTOS_N_TOP_ITEMS]
(
@ITEMS INT
)
AS
SELECT TOP (@ITEMS) * FROM PRODUCTO ORDER BY NEWID()
GO
/****** Object:  StoredProcedure [dbo].[OBTENER_PRODUCTOS_X_CATEGORIA]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[OBTENER_PRODUCTOS_X_CATEGORIA]
(
@CATEGORIA VARCHAR(5)
)
AS
SELECT * FROM PRODUCTO WHERE IDCATEGORIA = @CATEGORIA
GO
/****** Object:  StoredProcedure [dbo].[REGISTRAR_CLIENTE]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[REGISTRAR_CLIENTE]
(
@NOMBRES VARCHAR(70),
@APELLIDOS VARCHAR(100),
@DNI CHAR(8),
@DIRECCION VARCHAR(20),
@CORREO VARCHAR(100),
@CONTRASENA VARCHAR(50),
@TELEFONO VARCHAR(30)
)
AS
INSERT INTO CLIENTE 
(
NOMBRES,
APELLIDOS,
DNI,
DIRECCION,
CORREO,
CONTRASENA,
TELEFONO
)
VALUES
(@NOMBRES,
@APELLIDOS,
@DNI,
@DIRECCION,
@CORREO,
@CONTRASENA,
@TELEFONO
)

GO
/****** Object:  StoredProcedure [dbo].[REGISTRAR_PEDIDO]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[REGISTRAR_PEDIDO]
(
@IDPEDIDO VARCHAR(4),
@IDCLIENTE CHAR(3),
@TOTALVENTA FLOAT,
@REALIZADO BIT,
@IDPRODUCTO CHAR(4),
@CANTIDAD FLOAT,
@PRECIO FLOAT
)
AS
IF EXISTS(SELECT 1 FROM PEDIDO WHERE IDCLIENTE = @IDCLIENTE AND REALIZADO = 0)
BEGIN
	UPDATE PEDIDO SET TOTALVENTA = @TOTALVENTA WHERE IDCLIENTE = @IDCLIENTE
END
ELSE
BEGIN
	INSERT INTO PEDIDO (IDCLIENTE, TOTALVENTA, REALIZADO)
	VALUES (@IDCLIENTE,@TOTALVENTA,@REALIZADO)
	SET @IDPEDIDO = (SELECT IDPEDIDO FROM PEDIDO WHERE IDCLIENTE = @IDCLIENTE AND REALIZADO = 0)
END

IF EXISTS(SELECT 1 FROM PEDIDODETALLE WHERE IDPEDIDO = @IDPEDIDO AND IDPRODUCTO = @IDPRODUCTO)
BEGIN
	UPDATE PEDIDODETALLE SET CANTIDAD = CANTIDAD + @CANTIDAD, PRECIO = @PRECIO  WHERE IDPEDIDO = @IDPEDIDO AND IDPRODUCTO = @IDPRODUCTO
END
ELSE
BEGIN
	INSERT INTO PEDIDODETALLE (IDPEDIDO, IDPRODUCTO, CANTIDAD, PRECIO) VALUES (@IDPEDIDO, @IDPRODUCTO, @CANTIDAD, @PRECIO)
END

SELECT @IDPEDIDO
GO
/****** Object:  StoredProcedure [dbo].[VALIDAR_CLIENTE]    Script Date: 5/7/2024 8:36:59 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[VALIDAR_CLIENTE]
(
@CORREO VARCHAR(80), 
@CONTRASENA VARCHAR(80)
)
AS
SELECT A.IDCLIENTE, A.NOMBRES, A.APELLIDOS, A.DNI, A.DIRECCION, A.CORREO, A.TELEFONO, ISNULL(A.IDPEDIDO,'') AS IDPEDIDO FROM (
SELECT C.IDCLIENTE, C.NOMBRES, C.APELLIDOS, C.DNI, C.DIRECCION, C.CORREO, C.CONTRASENA, C.TELEFONO
, (
SELECT P.IDPEDIDO FROM PEDIDO P WHERE P.IDCLIENTE = C.IDCLIENTE AND P.REALIZADO = 0
) AS IDPEDIDO 
FROM CLIENTE C
WHERE UPPER(CORREO) = UPPER(@CORREO) AND UPPER(C.CONTRASENA) = UPPER(@CONTRASENA) 
) A
GO